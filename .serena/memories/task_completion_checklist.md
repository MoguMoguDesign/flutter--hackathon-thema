# タスク完了時のチェックリスト

タスクを完了する前に、必ず以下のチェックリストを確認してください。

## 必須チェック（この順序で実行）

### 1. 静的解析
```bash
fvm flutter analyze
```
- [ ] エラーが0件であること
- [ ] 警告がないこと（または許容範囲内）

### 2. コードフォーマット
```bash
dart format --set-exit-if-changed .
```
- [ ] すべてのDartファイルがフォーマットされていること
- [ ] インデントが正しいこと（2スペース）

### 3. テスト実行
```bash
fvm flutter test
```
- [ ] すべてのテストがパスすること
- [ ] 新機能にテストが追加されていること
- [ ] 既存のテストが壊れていないこと

### 4. コード生成（必要な場合）
```bash
fvm flutter pub run build_runner build --delete-conflicting-outputs
```
- [ ] Riverpod Provider が正しく生成されていること
- [ ] Freezed クラスが正しく生成されていること
- [ ] JSON シリアライゼーションが正しく動作すること

## コード品質チェック

### アーキテクチャ
- [ ] 三層アーキテクチャのルールに従っているか
- [ ] 一方向依存（App → Feature → Shared）が守られているか
- [ ] Feature間の直接依存がないか
- [ ] Sharedが他の層に依存していないか

### コーディングスタイル
- [ ] 命名規則（snake_case, PascalCase, camelCase）に従っているか
- [ ] 型が明示的に指定されているか（varを使っていないか）
- [ ] constが適切に使用されているか
- [ ] 公開APIにドキュメントコメントが書かれているか
- [ ] TODOコメントにIssue番号が含まれているか

### 禁止事項チェック
- [ ] dynamic型を使用していないか
- [ ] print()を使用していないか（loggerを使用）
- [ ] コードの重複がないか
- [ ] Magic Numbersが定数化されているか

### Import
- [ ] Import順序が正しいか（Dart SDK → Flutter → 外部 → プロジェクト内）
- [ ] 未使用のImportがないか
- [ ] 相対パスは同一Feature内のみで使用されているか

## 機能チェック

### 新機能追加時
- [ ] 機能が正しく動作するか
- [ ] エラーハンドリングが適切か
- [ ] エッジケースが考慮されているか
- [ ] UIがレスポンシブか
- [ ] アクセシビリティが考慮されているか

### バグ修正時
- [ ] バグが修正されているか
- [ ] 修正により他の機能が壊れていないか
- [ ] 根本原因が解決されているか（対症療法でないか）

### リファクタリング時
- [ ] 既存の動作が変わっていないか
- [ ] コードの可読性が向上したか
- [ ] パフォーマンスが低下していないか

## ドキュメント

- [ ] README.mdが更新されているか（必要な場合）
- [ ] ARCHITECTURE.mdが更新されているか（アーキテクチャ変更時）
- [ ] STYLE_GUIDE.mdが更新されているか（規約変更時）
- [ ] コードにドキュメントコメントが追加されているか

## Git

### コミット前
- [ ] `git status` で変更内容を確認
- [ ] `git diff` で変更箇所を確認
- [ ] 不要なファイルがステージングされていないか
- [ ] コミットメッセージがAngularスタイルに従っているか

### コミットメッセージ
```
<type>(<scope>): <subject>

例:
feat(auth): ログイン機能を追加
fix(profile): ユーザー名表示のバグを修正
refactor(shared): ボタンコンポーネントを改善
```

### プルリクエスト前
- [ ] ブランチ名が適切か（feature/, fix/, refactor/）
- [ ] mainブランチとの差分を確認
- [ ] コンフリクトがないか
- [ ] PRテンプレートに従って記載されているか

## パフォーマンス

- [ ] 不要な再ビルドがないか
- [ ] const が適切に使用されているか
- [ ] 大きなウィジェットが適切に分割されているか
- [ ] 重い処理が非同期化されているか

## セキュリティ

- [ ] APIキーや秘密情報がハードコードされていないか
- [ ] ユーザー入力が適切にバリデーションされているか
- [ ] SQLインジェクション対策がされているか（該当する場合）
- [ ] XSS対策がされているか（Webの場合）

## アクセシビリティ

- [ ] 適切なセマンティクスが設定されているか
- [ ] スクリーンリーダー対応がされているか
- [ ] 色のコントラストが適切か
- [ ] キーボードナビゲーションが可能か

## 最終確認

### ビルド確認
```bash
# デバッグビルド
fvm flutter build apk --debug

# または実機起動で確認
fvm flutter run
```
- [ ] ビルドが成功するか
- [ ] 実行時エラーがないか
- [ ] UIが正しく表示されるか

### クリーンビルド（念のため）
```bash
fvm flutter clean
fvm flutter pub get
fvm flutter pub run build_runner build --delete-conflicting-outputs
fvm flutter run
```

## チェックリスト完了後

すべてのチェックが完了したら：
1. ✅ 静的解析パス
2. ✅ フォーマット完了
3. ✅ テストパス
4. ✅ コード品質確認
5. ✅ ドキュメント更新

→ **コミット・プッシュ可能**

## よくあるエラーと解決方法

### 静的解析エラー
```bash
# Lintエラーが出た場合
fvm flutter analyze --fix
```

### コード生成エラー
```bash
# キャッシュクリア後に再生成
fvm flutter clean
fvm flutter pub get
fvm flutter pub run build_runner build --delete-conflicting-outputs
```

### テストエラー
```bash
# 特定のテストだけ実行して確認
fvm flutter test test/path/to/test_file_test.dart
```

## 注意事項

- ⚠️ チェックリストを飛ばさないこと
- ⚠️ エラーを無視してコミットしないこと
- ⚠️ テストが壊れたまま放置しないこと
- ⚠️ 「後で直す」をしないこと

**品質の高いコードを維持するため、このチェックリストを必ず守ってください。**
